# Tennis Rules RAG í†µí•© ê³„íšì„œ

## Tennis_Rules_RAG â†’ Tennis Mate í†µí•© ì½”ë”© ê³„íš

> **ì‘ì„±ì¼**: 2026-02-07
> **ëª©ì **: ë…ë¦½ì ìœ¼ë¡œ ì„±ê³µí•œ Tennis_Rules_RAG ì‹œìŠ¤í…œì„ Tennis Mate ì•±ì— ì™„ì „íˆ í†µí•©
> **ì›ì¹™**: ì½”ë“œ ì¤‘ë³µ ìµœì†Œí™”, ê¸°ì¡´ ì•„í‚¤í…ì²˜ ì¡´ì¤‘, ì ì§„ì  í†µí•©

---

## 1. í˜„ì¬ ìƒíƒœ ë¹„êµ ë¶„ì„

### 1.1 ë‘ ì‹œìŠ¤í…œ ë¹„êµí‘œ

| ì˜ì—­ | Tennis Mate (í˜„ì¬) | Tennis_Rules_RAG (ì„±ê³µ) | ì°¨ì´ì  |
|------|-------------------|----------------------|--------|
| **ETL ë„êµ¬** | PyPDF2 | pdfplumber | RAGê°€ ë” ì •í™•í•œ í…ìŠ¤íŠ¸ ì¶”ì¶œ |
| **Chunking** | ê¸°ë³¸ ì •ê·œì‹ (`ì œNì¡°`, `Article N`) | ì •êµí•œ ì •ê·œì‹ + TOC ì œì™¸ + 155ê°œ ì¡°í•­ | RAGê°€ í›¨ì”¬ ì •êµí•¨ |
| **DB ìŠ¤í‚¤ë§ˆ** | `title`, `content`, `language`, `chunk_index` | `rule_id`, `content`, `metadata` JSONB | í•„ë“œ êµ¬ì¡°ê°€ ë‹¤ë¦„ |
| **ì¸ë±ìŠ¤** | IVFFlat (lists=100) | HNSW | RAGì˜ HNSWê°€ ë” ë¹ ë¦„ |
| **RPC í•¨ìˆ˜** | `match_tennis_rules` (language í•„í„°) | `match_tennis_rules` (threshold/count) | íŒŒë¼ë¯¸í„° ë‹¤ë¦„ |
| **Edge Function** | `search-tennis-rules` (Gemini 2.0 Flash) | `tennis-rag-query` (Gemini 1.5 Flash) | ëª¨ë¸ ë²„ì „ ë‹¤ë¦„ |
| **API í‚¤ ê´€ë¦¬** | í´ë¼ì´ì–¸íŠ¸ â†’ Edge Function body | í´ë¼ì´ì–¸íŠ¸ â†’ Edge Function body | ë™ì¼ íŒ¨í„´ |
| **Frontend** | React `TennisRulesChatModal.tsx` | Vanilla HTML `tennis_chat.html` | Tennis Mateê°€ ë” ë°œì „ |
| **ì„ë² ë”©** | `text-embedding-004` (768d) | `text-embedding-004` (768d) | ë™ì¼ |

### 1.2 í•µì‹¬ ê²°ë¡ 

```
Tennis_Rules_RAGì—ì„œ ê°€ì ¸ì˜¬ ê²ƒ:
  âœ… ETL íŒŒì´í”„ë¼ì¸ (pdfplumber + ì •êµí•œ Chunking)
  âœ… HNSW ì¸ë±ìŠ¤ ì „ëµ
  âœ… metadata JSONB ì»¬ëŸ¼ (ìœ ì—°í•œ ë©”íƒ€ë°ì´í„°)
  âœ… ì´ë¯¸ ì ì¬ëœ 155ê°œ ì¡°í•­ ë°ì´í„°

Tennis Mateì—ì„œ ìœ ì§€í•  ê²ƒ:
  âœ… React ê¸°ë°˜ Chat UI (TennisRulesChatModal.tsx)
  âœ… Gemini 2.0 Flash ëª¨ë¸ (ë” ìµœì‹ )
  âœ… ê¸°ì¡´ language í•„í„°ë§ ê¸°ëŠ¥
  âœ… Supabase Edge Function ì•„í‚¤í…ì²˜
  âœ… API í‚¤ ê´€ë¦¬ ì‹œìŠ¤í…œ (geminiService.ts)
```

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

### 2.1 í†µí•© í›„ ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TENNIS MATE APPLICATION                           â”‚
â”‚                    (React + TypeScript + Vite)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Players  â”‚  â”‚ Matches  â”‚  â”‚  Feed    â”‚  â”‚      Stats       â”‚    â”‚
â”‚  â”‚   Tab    â”‚  â”‚   Tab    â”‚  â”‚   Tab    â”‚  â”‚       Tab        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                      â”‚              â”‚
â”‚                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                                              â”‚   AI Coach     â”‚     â”‚
â”‚                                              â”‚   Section      â”‚     â”‚
â”‚                                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚                                              â”‚ [Statsë¶„ì„]    â”‚     â”‚
â”‚                                              â”‚ [ê·œì¹™ì§ˆë¬¸] â—„â”€â”€â”€â”¼â”€â”€â”€â”€ RAG í†µí•© í¬ì¸íŠ¸
â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                      â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚  â”‚                                                   â”‚              â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚  â”‚  â”‚ StatsAnalysisModal  â”‚  â”‚TennisRulesChatModalâ”‚  â”‚              â”‚
â”‚  â”‚  â”‚ (í†µê³„ ë¶„ì„ AI)       â”‚  â”‚ (ê·œì¹™ Q&A RAG)     â”‚  â”‚              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚  â”‚            â”‚                        â”‚              â”‚              â”‚
â”‚  â”‚            â–¼                        â–¼              â”‚              â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚  â”‚  â”‚           geminiService.ts                  â”‚   â”‚              â”‚
â”‚  â”‚  â”‚  â€¢ getStoredApiKey()                        â”‚   â”‚              â”‚
â”‚  â”‚  â”‚  â€¢ testApiKey()                             â”‚   â”‚              â”‚
â”‚  â”‚  â”‚  â€¢ generateAIAnalysis()                     â”‚   â”‚              â”‚
â”‚  â”‚  â”‚  + searchTennisRules() â—„â”€â”€â”€â”€ ì‹ ê·œ ì¶”ê°€       â”‚   â”‚              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚  â”‚                    â”‚                               â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                       â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚             â–¼                             â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
          â”‚  â”‚  Supabase Edge        â”‚                â”‚
          â”‚  â”‚  Function             â”‚                â”‚
          â”‚  â”‚  search-tennis-rules  â”‚                â”‚
          â”‚  â”‚                       â”‚                â”‚
          â”‚  â”‚  1. Gemini Embedding  â”‚ â—„â”€â”€â”€ text-embedding-004
          â”‚  â”‚  2. pgvector Search   â”‚ â—„â”€â”€â”€ match_tennis_rules()
          â”‚  â”‚  3. Gemini Answer     â”‚ â—„â”€â”€â”€ gemini-2.0-flash
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
          â”‚              â”‚                            â”‚
          â”‚              â–¼                            â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
          â”‚  â”‚   Supabase Database   â”‚                â”‚
          â”‚  â”‚   (PostgreSQL)        â”‚                â”‚
          â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
          â”‚  â”‚  tennis_rules         â”‚ â—„â”€â”€â”€ pgvector (768d)
          â”‚  â”‚  â”œ id                 â”‚                â”‚
          â”‚  â”‚  â”œ rule_id    â—„â”€NEW   â”‚                â”‚
          â”‚  â”‚  â”œ title              â”‚                â”‚
          â”‚  â”‚  â”œ content            â”‚                â”‚
          â”‚  â”‚  â”œ source_file        â”‚                â”‚
          â”‚  â”‚  â”œ language           â”‚                â”‚
          â”‚  â”‚  â”œ chunk_index        â”‚                â”‚
          â”‚  â”‚  â”œ metadata   â—„â”€NEW   â”‚                â”‚
          â”‚  â”‚  â”œ embedding          â”‚                â”‚
          â”‚  â”‚  â”” created_at         â”‚                â”‚
          â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
          â”‚  â”‚  players              â”‚                â”‚
          â”‚  â”‚  sessions             â”‚                â”‚
          â”‚  â”‚  matches              â”‚                â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
          â”‚        SUPABASE CLOUD                     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â–²
                        â”‚ ETL (ì¼íšŒì„± ì‹¤í–‰)
                        â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  ETL Pipeline (Python)                    â”‚
          â”‚                                           â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
          â”‚  â”‚ PDF ë¬¸ì„œ  â”‚â”€â”€â”€â–¶â”‚ pdfplumber â”‚           â”‚
          â”‚  â”‚ ITF (EN)  â”‚    â”‚ í…ìŠ¤íŠ¸ì¶”ì¶œ  â”‚           â”‚
          â”‚  â”‚ KTA (KO)  â”‚    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                  â”‚
          â”‚                        â–¼                  â”‚
          â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
          â”‚               â”‚ Smart Chunking â”‚          â”‚
          â”‚               â”‚ â€¢ ì¡°í•­ë³„ ë¶„í•     â”‚          â”‚
          â”‚               â”‚ â€¢ TOC ì œì™¸      â”‚          â”‚
          â”‚               â”‚ â€¢ 155ê°œ ì¡°í•­    â”‚          â”‚
          â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
          â”‚                       â”‚                   â”‚
          â”‚                       â–¼                   â”‚
          â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
          â”‚               â”‚ Gemini         â”‚          â”‚
          â”‚               â”‚ Embeddings     â”‚          â”‚
          â”‚               â”‚ (768 dims)     â”‚          â”‚
          â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
          â”‚                       â”‚                   â”‚
          â”‚                       â–¼                   â”‚
          â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
          â”‚               â”‚ Supabase       â”‚          â”‚
          â”‚               â”‚ Batch Upload   â”‚          â”‚
          â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 RAG ì§ˆì˜ íë¦„ (Query Flow)

```
ì‚¬ìš©ì                    Frontend                Edge Function           Supabase DB          Gemini API
  â”‚                         â”‚                        â”‚                      â”‚                    â”‚
  â”‚  "ì„œë¸Œ í´íŠ¸ë€?"         â”‚                        â”‚                      â”‚                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                        â”‚                      â”‚                    â”‚
  â”‚                         â”‚                        â”‚                      â”‚                    â”‚
  â”‚                         â”‚  ì–¸ì–´ê°ì§€: í•œê¸€â†’'ko'    â”‚                      â”‚                    â”‚
  â”‚                         â”‚  APIí‚¤: localStorage   â”‚                      â”‚                    â”‚
  â”‚                         â”‚                        â”‚                      â”‚                    â”‚
  â”‚                         â”‚  POST /search-tennis-  â”‚                      â”‚                    â”‚
  â”‚                         â”‚  rules                 â”‚                      â”‚                    â”‚
  â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                      â”‚                    â”‚
  â”‚                         â”‚  {question, apiKey,    â”‚                      â”‚                    â”‚
  â”‚                         â”‚   language:'ko'}       â”‚                      â”‚                    â”‚
  â”‚                         â”‚                        â”‚                      â”‚                    â”‚
  â”‚                         â”‚                        â”‚  embedContent()      â”‚                    â”‚
  â”‚                         â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
  â”‚                         â”‚                        â”‚                      â”‚      [768d vector] â”‚
  â”‚                         â”‚                        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”‚                         â”‚                        â”‚                      â”‚                    â”‚
  â”‚                         â”‚                        â”‚  match_tennis_rules()â”‚                    â”‚
  â”‚                         â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                    â”‚
  â”‚                         â”‚                        â”‚                      â”‚  cosine similarity â”‚
  â”‚                         â”‚                        â”‚   Top 5 ê·œì¹™ ë°˜í™˜     â”‚  search            â”‚
  â”‚                         â”‚                        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚
  â”‚                         â”‚                        â”‚                      â”‚                    â”‚
  â”‚                         â”‚                        â”‚  generateContent()   â”‚                    â”‚
  â”‚                         â”‚                        â”‚  (context + question)â”‚                    â”‚
  â”‚                         â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
  â”‚                         â”‚                        â”‚                      â”‚       [AI ë‹µë³€]    â”‚
  â”‚                         â”‚                        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”‚                         â”‚                        â”‚                      â”‚                    â”‚
  â”‚                         â”‚  {answer, sources,     â”‚                      â”‚                    â”‚
  â”‚                         â”‚   similarity scores}   â”‚                      â”‚                    â”‚
  â”‚                         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                    â”‚
  â”‚                         â”‚                        â”‚                      â”‚                    â”‚
  â”‚  ë‹µë³€ + ì¶œì²˜ í‘œì‹œ        â”‚                        â”‚                      â”‚                    â”‚
  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                      â”‚                    â”‚
  â”‚                         â”‚                        â”‚                      â”‚                    â”‚
```

### 2.3 ETL ë°ì´í„° íë¦„ (Data Pipeline)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ETL PIPELINE                                â”‚
â”‚                    (ì¼íšŒì„± / ê·œì¹™ ì—…ë°ì´íŠ¸ ì‹œ)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  STEP 1: í…ìŠ¤íŠ¸ ì¶”ì¶œ                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ ITF Rules PDF    â”‚â”€â”€â”€â”€â”€â–¶â”‚   pdfplumber     â”‚                   â”‚
â”‚  â”‚ (ì˜ë¬¸, ~100p)    â”‚      â”‚   í…ìŠ¤íŠ¸ ì¶”ì¶œ     â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                             â”‚
â”‚  â”‚ KTA ê·œì¹™ì§‘ PDF   â”‚â”€â”€â”€â”€â”€â–¶         â”‚                             â”‚
â”‚  â”‚ (í•œê¸€, ~80p)     â”‚      Raw Text (ì „ì²´ í…ìŠ¤íŠ¸)                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚                             â”‚
â”‚                                     â–¼                             â”‚
â”‚  STEP 2: ìŠ¤ë§ˆíŠ¸ ì²­í‚¹                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Chunking Engine                         â”‚    â”‚
â”‚  â”‚                                                           â”‚    â”‚
â”‚  â”‚  Input: Raw Text                                          â”‚    â”‚
â”‚  â”‚    â–¼                                                      â”‚    â”‚
â”‚  â”‚  [TOC ì œì™¸] â”€â”€â–¶ ëª©ì°¨ í˜ì´ì§€ ìë™ ê°ì§€ ë° ì œê±°               â”‚    â”‚
â”‚  â”‚    â–¼                                                      â”‚    â”‚
â”‚  â”‚  [íŒ¨í„´ ë§¤ì¹­] â”€â”€â–¶ í•œê¸€: "**1. ì œëª©**", "**ì œNì¡°**"           â”‚    â”‚
â”‚  â”‚              â”€â”€â–¶ ì˜ë¬¸: "**Rule N**", "**Article N**"       â”‚    â”‚
â”‚  â”‚    â–¼                                                      â”‚    â”‚
â”‚  â”‚  [ì¡°í•­ë³„ ë¶„ë¦¬] â”€â”€â–¶ 155ê°œ ë…ë¦½ ì¡°í•­ìœ¼ë¡œ ë¶„í•                   â”‚    â”‚
â”‚  â”‚    â–¼                                                      â”‚    â”‚
â”‚  â”‚  Output: [{rule_id, title, content, language}, ...]       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚                             â”‚
â”‚                                     â–¼                             â”‚
â”‚  STEP 3: ì„ë² ë”© ìƒì„±                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  for each chunk:                                          â”‚    â”‚
â”‚  â”‚    combined = f"{title}\n\n{content}"                     â”‚    â”‚
â”‚  â”‚    embedding = Gemini text-embedding-004(combined)        â”‚    â”‚
â”‚  â”‚    â†’ 768ì°¨ì› ë²¡í„°                                          â”‚    â”‚
â”‚  â”‚    â†’ task_type: "retrieval_document"                      â”‚    â”‚
â”‚  â”‚    â†’ L2 ì •ê·œí™” ì ìš©                                        â”‚    â”‚
â”‚  â”‚  batch: 10ê°œì”© / rate limit: 0.2ì´ˆ ê°„ê²©                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚                             â”‚
â”‚                                     â–¼                             â”‚
â”‚  STEP 4: DB ì—…ë¡œë“œ                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Supabase tennis_rules í…Œì´ë¸”                              â”‚    â”‚
â”‚  â”‚  â€¢ UPSERT (rule_id + source_file ê¸°ì¤€)                    â”‚    â”‚
â”‚  â”‚  â€¢ ë°°ì¹˜ ì‚¬ì´ì¦ˆ: 10                                         â”‚    â”‚
â”‚  â”‚  â€¢ ì´ 155ê°œ ì¡°í•­ ì—…ë¡œë“œ                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. í†µí•© ë‹¨ê³„ë³„ ê³„íš

### Phase 1: DB ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ (ê¸°ë°˜ ì‘ì—…)

```
ëª©í‘œ: tennis_rules í…Œì´ë¸”ì„ ë‘ ì‹œìŠ¤í…œì˜ ì¥ì ì„ í•©ì³ì„œ í™•ì¥

í˜„ì¬ Tennis Mate ìŠ¤í‚¤ë§ˆ:          í†µí•© í›„ ìŠ¤í‚¤ë§ˆ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id BIGSERIAL PK     â”‚          â”‚ id BIGSERIAL PK         â”‚
â”‚ title TEXT           â”‚          â”‚ rule_id TEXT         NEW â”‚ â—„â”€â”€ RAGì˜ ì¡°í•­ ID
â”‚ content TEXT         â”‚          â”‚ title TEXT              â”‚
â”‚ source_file TEXT     â”‚          â”‚ content TEXT            â”‚
â”‚ language VARCHAR(2)  â”‚          â”‚ source_file TEXT        â”‚
â”‚ chunk_index INTEGER  â”‚          â”‚ language VARCHAR(2)     â”‚
â”‚ embedding vector(768)â”‚          â”‚ chunk_index INTEGER     â”‚
â”‚ created_at TIMESTAMP â”‚          â”‚ metadata JSONB      NEW â”‚ â—„â”€â”€ ìœ ì—°í•œ ë©”íƒ€ë°ì´í„°
â”‚ updated_at TIMESTAMP â”‚          â”‚ embedding vector(768)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ created_at TIMESTAMP    â”‚
                                 â”‚ updated_at TIMESTAMP    â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ë³€ê²½ ì‘ì—…:
  1. rule_id ì»¬ëŸ¼ ì¶”ê°€ (ALTER TABLE)
  2. metadata JSONB ì»¬ëŸ¼ ì¶”ê°€
  3. IVFFlat â†’ HNSW ì¸ë±ìŠ¤ ë³€ê²½
  4. match_tennis_rules() RPC í•¨ìˆ˜ ì—…ë°ì´íŠ¸
  5. ë§ˆì´ê·¸ë ˆì´ì…˜ SQL íŒŒì¼ ìƒì„±
```

**íŒŒì¼ ë³€ê²½ ëª©ë¡:**
| íŒŒì¼ | ì‘ì—… |
|------|------|
| `supabase/migrations/20260208_upgrade_tennis_rules_rag.sql` | ì‹ ê·œ ìƒì„± |
| `supabase_schema.sql` | í†µí•© ìŠ¤í‚¤ë§ˆ ë°˜ì˜ |

---

### Phase 2: ETL íŒŒì´í”„ë¼ì¸ ì—…ê·¸ë ˆì´ë“œ

```
ëª©í‘œ: Tennis_Rules_RAGì˜ ì •êµí•œ ETLì„ Tennis Mateì— ì´ì‹

í˜„ì¬ (Tennis Mate):              í†µí•© í›„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ upload_tennis_rules  â”‚          â”‚ upload_tennis_rules.py       â”‚
â”‚ .py                  â”‚          â”‚                              â”‚
â”‚                      â”‚          â”‚ â€¢ pdfplumber ì‚¬ìš©        UPG â”‚
â”‚ â€¢ PyPDF2 ì‚¬ìš©        â”‚    â”€â”€â–¶   â”‚ â€¢ ì •êµí•œ Chunking        UPG â”‚
â”‚ â€¢ ê¸°ë³¸ ì •ê·œì‹ ë¶„í•    â”‚          â”‚   - TOC ìë™ ì œì™¸            â”‚
â”‚ â€¢ 800ì fallback    â”‚          â”‚   - ë³¼ë“œ íŒ¨í„´ ë§¤ì¹­           â”‚
â”‚                      â”‚          â”‚   - 155ê°œ ì¡°í•­ ìƒì„±          â”‚
â”‚                      â”‚          â”‚ â€¢ gen_sql_from_txt í†µí•©  NEW â”‚
â”‚                      â”‚          â”‚ â€¢ DRY_RUN ëª¨ë“œ ì§€ì›      NEW â”‚
â”‚                      â”‚          â”‚ â€¢ UPSERT ë¡œì§            NEW â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŒŒì¼ ë³€ê²½ ëª©ë¡:**
| íŒŒì¼ | ì‘ì—… |
|------|------|
| `scripts/upload_tennis_rules.py` | ì „ë©´ ì—…ê·¸ë ˆì´ë“œ |
| `scripts/requirements.txt` | pdfplumber ì¶”ê°€ |

**í•µì‹¬ ì´ì‹ í•­ëª©:**
1. `pdfplumber` ë„ì… (PyPDF2 ëŒ€ì²´)
2. Tennis_Rules_RAGì˜ ì¡°í•­ë³„ Chunking ë¡œì§ ì´ì‹
   - í•œê¸€: `"**1. ì œëª©**"`, `"**I. ì œëª©**"`, `"**A. ì œëª©**"` íŒ¨í„´
   - ì˜ë¬¸: `"**Rule 1**"`, `"**Article 1**"`, `"**Appendix I**"` íŒ¨í„´
3. TOC(ëª©ì°¨) ìë™ ì œì™¸ ë¡œì§
4. DRY_RUN / SKIP_EMBEDDING / SKIP_REMOTE í™˜ê²½ë³€ìˆ˜ ì§€ì›
5. UPSERT ë¡œì§ (ì¤‘ë³µ ë°©ì§€)

---

### Phase 3: Edge Function ê°•í™”

```
ëª©í‘œ: ë‘ ì‹œìŠ¤í…œì˜ ì¥ì ì„ ê²°í•©í•œ Edge Function

í˜„ì¬ (Tennis Mate):                    í†µí•© í›„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ search-tennis-rules/       â”‚        â”‚ search-tennis-rules/               â”‚
â”‚ index.ts                   â”‚        â”‚ index.ts                           â”‚
â”‚                            â”‚        â”‚                                    â”‚
â”‚ â€¢ Gemini 2.0 Flash    âœ“   â”‚  â”€â”€â–¶   â”‚ â€¢ Gemini 2.0 Flash            âœ“   â”‚
â”‚ â€¢ language í•„í„°        âœ“   â”‚        â”‚ â€¢ language í•„í„°                âœ“   â”‚
â”‚ â€¢ similarity stats     âœ“   â”‚        â”‚ â€¢ similarity stats             âœ“   â”‚
â”‚ â€¢ ê³ ì • threshold 0.5   â”‚        â”‚ â€¢ ê°€ë³€ threshold (param)     UPG â”‚
â”‚ â€¢ ê³ ì • match_count 5   â”‚        â”‚ â€¢ ê°€ë³€ match_count (param)   UPG â”‚
â”‚                            â”‚        â”‚ â€¢ rule_id ë°˜í™˜               NEW â”‚
â”‚                            â”‚        â”‚ â€¢ metadata ë°˜í™˜              NEW â”‚
â”‚                            â”‚        â”‚ â€¢ ë©€í‹°í„´ ì»¨í…ìŠ¤íŠ¸ ì§€ì›        NEW â”‚
â”‚                            â”‚        â”‚ â€¢ í•œ/ì˜ í”„ë¡¬í”„íŠ¸ ë¶„ë¦¬         NEW â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŒŒì¼ ë³€ê²½ ëª©ë¡:**
| íŒŒì¼ | ì‘ì—… |
|------|------|
| `supabase/functions/search-tennis-rules/index.ts` | ê¸°ëŠ¥ í™•ì¥ |

**ìƒì„¸ ë³€ê²½ ì‚¬í•­:**

```typescript
// ìš”ì²­ ì¸í„°í˜ì´ìŠ¤ í™•ì¥
interface SearchRequest {
  question: string;
  geminiApiKey: string;
  language?: 'en' | 'ko';
  includeStats?: boolean;
  generateAnswer?: boolean;
  matchCount?: number;       // NEW: ê¸°ë³¸ê°’ 5
  matchThreshold?: number;   // NEW: ê¸°ë³¸ê°’ 0.5
  chatHistory?: Array<{      // NEW: ë©€í‹°í„´ ì§€ì›
    role: string;
    content: string;
  }>;
}

// ì‘ë‹µ ì¸í„°í˜ì´ìŠ¤ í™•ì¥
interface SearchResponse {
  success: boolean;
  answer?: string;
  matches?: Array<{
    id: number;
    rule_id: string;          // NEW
    title: string;
    content: string;
    source_file: string;
    language: string;
    similarity: number;
    metadata?: object;        // NEW
  }>;
  stats?: { ... };
}
```

---

### Phase 4: Frontend Chat UI ê°•í™”

```
ëª©í‘œ: TennisRulesChatModalì„ ë” í’ë¶€í•œ ê²½í—˜ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ

í˜„ì¬ UI êµ¬ì¡°:                           í†µí•© í›„ UI êµ¬ì¡°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—   â”‚           â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚ â•‘ Ask Tennis Questionsâ•‘   â”‚           â”‚ â•‘ ğŸ¾ í…Œë‹ˆìŠ¤ ê·œì¹™ Q&A          â•‘ â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚           â”‚ â•‘    [KO] [EN] ì–¸ì–´ í† ê¸€  NEW â•‘ â”‚
â”‚                          â”‚           â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚                                  â”‚
â”‚ â”‚ ì±„íŒ… ë©”ì‹œì§€ ì˜ì—­    â”‚   â”‚           â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    â”‚   â”‚           â”‚ â”‚ ì±„íŒ… ë©”ì‹œì§€ ì˜ì—­              â”‚ â”‚
â”‚ â”‚ User: ì§ˆë¬¸         â”‚   â”‚           â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚ Bot: ë‹µë³€          â”‚   â”‚   â”€â”€â–¶     â”‚ â”‚ User: ì§ˆë¬¸                   â”‚ â”‚
â”‚ â”‚   ğŸ“š Sources:      â”‚   â”‚           â”‚ â”‚ Bot: ë‹µë³€                    â”‚ â”‚
â”‚ â”‚   â€¢ Article 5 (87%)â”‚   â”‚           â”‚ â”‚   ğŸ“š Sources:                â”‚ â”‚
â”‚ â”‚                    â”‚   â”‚           â”‚ â”‚   â€¢ Rule 16 ì„œë¸Œí´íŠ¸ (87%)   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚                          â”‚           â”‚ â”‚   â”‚ ğŸ“– ì „ì²´ ì¡°í•­ ë³´ê¸°  â”‚ NEW â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚ â”‚ [ì…ë ¥] [ì „ì†¡]       â”‚   â”‚           â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                       â”‚ â”‚ ğŸ’¡ ì¶”ì²œ ì§ˆë¬¸:            NEW â”‚ â”‚
                                       â”‚ â”‚ "ì„œë¸Œ ê·œì¹™ì€?" "íƒ€ì´ë¸Œë ˆì´í¬?" â”‚ â”‚
                                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                       â”‚                                  â”‚
                                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                       â”‚ â”‚ [ì…ë ¥]              [ì „ì†¡]   â”‚ â”‚
                                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŒŒì¼ ë³€ê²½ ëª©ë¡:**
| íŒŒì¼ | ì‘ì—… |
|------|------|
| `components/TennisRulesChatModal.tsx` | UI ê°•í™” |
| `services/geminiService.ts` | `searchTennisRules()` í•¨ìˆ˜ ì¶”ê°€ |
| `types.ts` | RAG ê´€ë ¨ íƒ€ì… ì¶”ê°€ |
| `constants.ts` | RAG ê´€ë ¨ ìƒìˆ˜ ì¶”ê°€ |

**ì£¼ìš” ì¶”ê°€ ê¸°ëŠ¥:**
1. ì¶”ì²œ ì§ˆë¬¸ í‘œì‹œ (ë¹ˆ ìƒíƒœì¼ ë•Œ)
2. ì–¸ì–´ í† ê¸€ (í•œêµ­ì–´/ì˜ì–´)
3. ì¶œì²˜ ì¡°í•­ ì „ë¬¸ ë³´ê¸° (ì ‘ê¸°/í¼ì¹˜ê¸°)
4. rule_id ê¸°ë°˜ ì¶œì²˜ í‘œì‹œ ê°œì„ 
5. ì±„íŒ… íˆìŠ¤í† ë¦¬ ë©€í‹°í„´ ì»¨í…ìŠ¤íŠ¸

---

### Phase 5: ë°ì´í„° ì¬ì ì¬ (Re-ETL)

```
ëª©í‘œ: Tennis_Rules_RAGì˜ ë°ì´í„°ë¥¼ í†µí•© ìŠ¤í‚¤ë§ˆë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜

ì‹¤í–‰ ìˆœì„œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  Step 1: ê¸°ì¡´ ë°ì´í„° ë°±ì—…                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚ SELECT * FROM           â”‚                                â”‚
â”‚  â”‚ tennis_rules            â”‚â”€â”€â–¶ backup.json                 â”‚
â”‚  â”‚ INTO backup             â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                             â”‚
â”‚  Step 2: ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚ ALTER TABLE              â”‚                                â”‚
â”‚  â”‚ + ADD rule_id            â”‚                                â”‚
â”‚  â”‚ + ADD metadata           â”‚                                â”‚
â”‚  â”‚ + CHANGE INDEX           â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                             â”‚
â”‚  Step 3: ì—…ê·¸ë ˆì´ë“œëœ ETLë¡œ ì¬ì ì¬                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚ python upload_tennis_   â”‚                                â”‚
â”‚  â”‚ rules.py                â”‚                                â”‚
â”‚  â”‚ --pdf-dir ./pdfs        â”‚                                â”‚
â”‚  â”‚ (pdfplumber + ì •êµí•œ    â”‚                                â”‚
â”‚  â”‚  chunking ì‚¬ìš©)         â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                             â”‚
â”‚  Step 4: ë°ì´í„° ê²€ì¦                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚ SELECT COUNT(*)          â”‚  Expected: ~155               â”‚
â”‚  â”‚ FROM tennis_rules;       â”‚                                â”‚
â”‚  â”‚ SELECT * FROM            â”‚                                â”‚
â”‚  â”‚ tennis_rules_stats;      â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. íŒŒì¼ë³„ ë³€ê²½ ê³„íš ìš”ì•½

### 4.1 ë³€ê²½ íŒŒì¼ ëª©ë¡

```
tennis-mate/
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â””â”€â”€ 20260208_upgrade_tennis_rules_rag.sql  â—„â”€â”€ [NEW] ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ functions/
â”‚       â””â”€â”€ search-tennis-rules/
â”‚           â””â”€â”€ index.ts                           â—„â”€â”€ [MODIFY] íŒŒë¼ë¯¸í„° í™•ì¥, ë©€í‹°í„´
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ upload_tennis_rules.py                     â—„â”€â”€ [UPGRADE] pdfplumber + ì •êµ ì²­í‚¹
â”‚   â””â”€â”€ requirements.txt                           â—„â”€â”€ [MODIFY] pdfplumber ì¶”ê°€
â”‚
â”œâ”€â”€ components/
â”‚   â””â”€â”€ TennisRulesChatModal.tsx                   â—„â”€â”€ [MODIFY] UI ê°•í™”
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ geminiService.ts                           â—„â”€â”€ [MODIFY] searchTennisRules() ì¶”ê°€
â”‚
â”œâ”€â”€ types.ts                                       â—„â”€â”€ [MODIFY] RAG íƒ€ì… ì¶”ê°€
â”œâ”€â”€ constants.ts                                   â—„â”€â”€ [MODIFY] RAG ìƒìˆ˜ ì¶”ê°€
â””â”€â”€ supabase_schema.sql                            â—„â”€â”€ [MODIFY] í†µí•© ìŠ¤í‚¤ë§ˆ
```

### 4.2 ì˜ì¡´ì„± ê´€ê³„ ë‹¤ì´ì–´ê·¸ë¨

```
Phase 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
(DB ìŠ¤í‚¤ë§ˆ)                   â”‚
                              â”œâ”€â”€â–¶ Phase 5 (ë°ì´í„° ì¬ì ì¬)
Phase 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
(ETL ì—…ê·¸ë ˆì´ë“œ)               â”‚
                              â”‚
Phase 3 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
(Edge Function)               â”‚
                              â”œâ”€â”€â–¶ Phase 6 (í†µí•© í…ŒìŠ¤íŠ¸)
Phase 4 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(Frontend UI)

ì‹¤í–‰ ìˆœì„œ:
  Phase 1 (DB) â†’ Phase 2 (ETL) â†’ Phase 3 (Edge Fn) â†’ Phase 4 (UI) â†’ Phase 5 (ë°ì´í„°) â†’ Phase 6 (í…ŒìŠ¤íŠ¸)

ë³‘ë ¬ ê°€ëŠ¥:
  Phase 2 (ETL) â”€â”
                  â”œâ”€â”€ ë³‘ë ¬ ì‘ì—… ê°€ëŠ¥
  Phase 3 (Edge) â”€â”¤
                  â”‚
  Phase 4 (UI)  â”€â”€â”˜
  (Phase 1 ì™„ë£Œ í›„)
```

---

## 5. ë¦¬ìŠ¤í¬ ë° ê³ ë ¤ì‚¬í•­

### 5.1 ë¦¬ìŠ¤í¬ ë§¤íŠ¸ë¦­ìŠ¤

```
ì˜í–¥ë„ â–²
       â”‚
  ë†’ìŒ  â”‚  â‘¢ ì„ë² ë”© ì°¨ì› ë¶ˆì¼ì¹˜     â‘  ê¸°ì¡´ ë°ì´í„° ì†ì‹¤
       â”‚
  ì¤‘ê°„  â”‚  â‘£ API í• ë‹¹ëŸ‰ ì´ˆê³¼        â‘¡ Edge Function í˜¸í™˜ì„±
       â”‚
  ë‚®ìŒ  â”‚  â‘¥ UI ë Œë”ë§ ì°¨ì´        â‘¤ Chunking í’ˆì§ˆ ì €í•˜
       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
          ë‚®ìŒ          ì¤‘ê°„          ë†’ìŒ    ë°œìƒí™•ë¥ 

ëŒ€ì‘ ë°©ì•ˆ:
  â‘  ê¸°ì¡´ ë°ì´í„° ì†ì‹¤ â†’ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ ë°˜ë“œì‹œ ë°±ì—… / ë¡¤ë°± SQL ì¤€ë¹„
  â‘¡ Edge Function í˜¸í™˜ì„± â†’ ê¸°ì¡´ API í˜¸í™˜ ìœ ì§€ (ì˜µì…”ë„ íŒŒë¼ë¯¸í„°)
  â‘¢ ì„ë² ë”© ì°¨ì› ë¶ˆì¼ì¹˜ â†’ ë‘ ì‹œìŠ¤í…œ ëª¨ë‘ 768d ì‚¬ìš© í™•ì¸ ì™„ë£Œ (ë¦¬ìŠ¤í¬ ë‚®ìŒ)
  â‘£ API í• ë‹¹ëŸ‰ â†’ ì¬ì ì¬ ì‹œ rate limit ì¤€ìˆ˜ / ë°°ì¹˜ ì²˜ë¦¬
  â‘¤ Chunking í’ˆì§ˆ â†’ DRY_RUN ëª¨ë“œë¡œ ì‚¬ì „ ê²€ì¦
  â‘¥ UI ë Œë”ë§ â†’ ê¸°ì¡´ React ì»´í¬ë„ŒíŠ¸ ì ì§„ì  ìˆ˜ì •
```

### 5.2 í˜¸í™˜ì„± ì „ëµ

```
ê¸°ì¡´ Tennis Mate ì‚¬ìš©ìì— ëŒ€í•œ ì˜í–¥:

Edge Function API:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ê¸°ì¡´ ìš”ì²­ (v1)        â”‚     â”‚ í™•ì¥ ìš”ì²­ (v2)                â”‚
  â”‚ {                    â”‚     â”‚ {                            â”‚
  â”‚   question: "...",   â”‚     â”‚   question: "...",           â”‚
  â”‚   geminiApiKey: "..",â”‚     â”‚   geminiApiKey: "..",        â”‚
  â”‚   language: "ko"     â”‚     â”‚   language: "ko",            â”‚
  â”‚ }                    â”‚     â”‚   matchCount: 10,    â† ì˜µì…˜  â”‚
  â”‚                      â”‚     â”‚   matchThreshold: 0.3 â† ì˜µì…˜ â”‚
  â”‚  âœ… ê·¸ëŒ€ë¡œ ë™ì‘       â”‚     â”‚   chatHistory: [...]  â† ì˜µì…˜ â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ }                            â”‚
                               â”‚                              â”‚
                               â”‚  âœ… í•˜ìœ„ í˜¸í™˜                 â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DB ë§ˆì´ê·¸ë ˆì´ì…˜:
  â€¢ ALTER TABLE ADD COLUMN (ê¸°ì¡´ ë°ì´í„° ìœ ì§€)
  â€¢ ì‹ ê·œ ì»¬ëŸ¼ì€ nullable (rule_id, metadata)
  â€¢ ì¸ë±ìŠ¤ ë³€ê²½ì€ ìë™ (DROP + CREATE)
```

---

## 6. í…ŒìŠ¤íŠ¸ ê³„íš

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â˜ Phase 1: DB ìŠ¤í‚¤ë§ˆ                                           â”‚
â”‚    â˜ ë§ˆì´ê·¸ë ˆì´ì…˜ SQL ì •ìƒ ì‹¤í–‰                                   â”‚
â”‚    â˜ ê¸°ì¡´ ë°ì´í„° ë³´ì¡´ í™•ì¸                                        â”‚
â”‚    â˜ match_tennis_rules() RPC ë™ì‘ í™•ì¸                          â”‚
â”‚    â˜ HNSW ì¸ë±ìŠ¤ ì„±ëŠ¥ í™•ì¸                                       â”‚
â”‚                                                                 â”‚
â”‚  â˜ Phase 2: ETL                                                 â”‚
â”‚    â˜ DRY_RUN ëª¨ë“œ í…ŒìŠ¤íŠ¸                                         â”‚
â”‚    â˜ í•œê¸€ PDF ì²­í‚¹ ê²°ê³¼ ê²€ì¦ (ì¡°í•­ ìˆ˜)                            â”‚
â”‚    â˜ ì˜ë¬¸ PDF ì²­í‚¹ ê²°ê³¼ ê²€ì¦ (ì¡°í•­ ìˆ˜)                            â”‚
â”‚    â˜ ì„ë² ë”© ìƒì„± í™•ì¸ (768ì°¨ì›)                                   â”‚
â”‚    â˜ Supabase ì—…ë¡œë“œ ê²€ì¦                                        â”‚
â”‚                                                                 â”‚
â”‚  â˜ Phase 3: Edge Function                                       â”‚
â”‚    â˜ ê¸°ì¡´ API í˜¸í™˜ì„± (v1 ìš”ì²­ í…ŒìŠ¤íŠ¸)                             â”‚
â”‚    â˜ í™•ì¥ íŒŒë¼ë¯¸í„° ë™ì‘ (matchCount, matchThreshold)              â”‚
â”‚    â˜ í•œê¸€ ì§ˆë¬¸ â†’ í•œê¸€ ë‹µë³€                                       â”‚
â”‚    â˜ ì˜ë¬¸ ì§ˆë¬¸ â†’ ì˜ë¬¸ ë‹µë³€                                       â”‚
â”‚    â˜ CORS ì •ìƒ ë™ì‘                                              â”‚
â”‚    â˜ ì—ëŸ¬ í•¸ë“¤ë§ (ì˜ëª»ëœ API í‚¤, ë¹ˆ ì§ˆë¬¸)                         â”‚
â”‚                                                                 â”‚
â”‚  â˜ Phase 4: Frontend                                            â”‚
â”‚    â˜ ì±„íŒ… ë©”ì‹œì§€ í‘œì‹œ ì •ìƒ                                        â”‚
â”‚    â˜ ì¶œì²˜ í‘œì‹œ (rule_id í¬í•¨)                                    â”‚
â”‚    â˜ ì¶”ì²œ ì§ˆë¬¸ ë™ì‘                                              â”‚
â”‚    â˜ ì–¸ì–´ í† ê¸€ ë™ì‘                                              â”‚
â”‚    â˜ ì—ëŸ¬ ìƒíƒœ í‘œì‹œ                                              â”‚
â”‚    â˜ ëª¨ë°”ì¼ ë°˜ì‘í˜• í™•ì¸                                           â”‚
â”‚                                                                 â”‚
â”‚  â˜ Phase 5: í†µí•© E2E                                            â”‚
â”‚    â˜ "ì„œë¸Œ í´íŠ¸ëŠ”?" â†’ ì •í™•í•œ ë‹µë³€ + Rule 16 ì¶œì²˜                  â”‚
â”‚    â˜ "What is a let?" â†’ ì˜ë¬¸ ë‹µë³€ + Article ì¶œì²˜                 â”‚
â”‚    â˜ "íƒ€ì´ë¸Œë ˆì´í¬ ê·œì¹™" â†’ ìƒì„¸ ë‹µë³€ + ë³µìˆ˜ ì¶œì²˜                   â”‚
â”‚    â˜ ê¸°ì¡´ Stats ë¶„ì„ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ (íšŒê·€ í…ŒìŠ¤íŠ¸)                  â”‚
â”‚    â˜ API í‚¤ ì—†ì„ ë•Œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ìš”ì•½: ì‘ì—… ìˆœì„œ ë° ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  #  â”‚ Phase              â”‚ ì£¼ìš” ì‘ì—…                â”‚ íŒŒì¼ ìˆ˜   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1  â”‚ DB ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜â”‚ ALTER TABLE, HNSW ì¸ë±ìŠ¤â”‚    2     â”‚
â”‚  2  â”‚ ETL ì—…ê·¸ë ˆì´ë“œ      â”‚ pdfplumber, ì²­í‚¹ ì´ì‹   â”‚    2     â”‚
â”‚  3  â”‚ Edge Function ê°•í™”  â”‚ íŒŒë¼ë¯¸í„° í™•ì¥, ë©€í‹°í„´    â”‚    1     â”‚
â”‚  4  â”‚ Frontend UI ê°•í™”    â”‚ ì¶”ì²œì§ˆë¬¸, ì–¸ì–´í† ê¸€, ì¶œì²˜ â”‚    4     â”‚
â”‚  5  â”‚ ë°ì´í„° ì¬ì ì¬        â”‚ ë°±ì—…â†’ë§ˆì´ê·¸ë ˆì´ì…˜â†’ETL   â”‚    -     â”‚
â”‚  6  â”‚ í†µí•© í…ŒìŠ¤íŠ¸          â”‚ E2E í…ŒìŠ¤íŠ¸             â”‚    -     â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     â”‚ í•©ê³„               â”‚                         â”‚  ~9 íŒŒì¼  â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

> **ì°¸ê³ **: ì´ ë¬¸ì„œëŠ” ì½”ë”© ê³„íšì„œì…ë‹ˆë‹¤. ì‹¤ì œ ì½”ë“œ ë³€ê²½ì€ í¬í•¨ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.
> Phaseë³„ êµ¬í˜„ ì‹œ ì´ ê³„íšì„œë¥¼ ì°¸ì¡°í•˜ì—¬ ì§„í–‰í•©ë‹ˆë‹¤.
